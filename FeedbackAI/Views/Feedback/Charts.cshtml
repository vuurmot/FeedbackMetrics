@model ChartsViewModel
<div class="container">
    <canvas style="max-height: 400px; max-width:80%"  id="top-issues"></canvas>

    <div class="row">
        <div class="col-sm">
            <img height="64px" width="64px" src="~/images/happy.webp" />
            <p>@Model.AllTimeData.HappyEmotionCount</p>
        </div>
        <div class="col-sm">
            <img height="64px" width="64px" src="~/images/angry.webp" />
            <div>@Model.AllTimeData.AngryEmotionCount</div>
        </div>
        <div class="col-sm">
            <img height="64px" width="64px" src="~/images/neutral.webp" />
            <div>@Model.AllTimeData.NeutralEmotionCount</div>
        </div>
    </div>

    <canvas style="max-height: 400px; max-width:80%" id="sentiment-over-time" </canvas>

</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js" integrity="sha512-L0Shl7nXXzIlBSUUPpxrokqq4ojqgZFQczTYlGjzONGTDAcLremjwaWv5A+EDLnxhQzY5xUZPWLOLqYRkY0Cbw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.js" integrity="sha512-7DgGWBKHddtgZ9Cgu8aGfJXvgcVv4SWSESomRtghob4k4orCBUTSRQ4s5SaC2Rz+OptMqNk0aHHsaUBk6fzIXw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js" integrity="sha512-ZwR1/gSZM3ai6vCdI+LVF1zSq/5HznD3ZSTk7kajkaj4D292NLuduDCO1c/NT8Id+jE58KYLKT7hXnbtryGmMg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js" integrity="sha512-CQBWl4fJHWbryGE+Pc7UAxWMUMNMWzWxF4SQo9CgkJIN1kx6djDQZjh3Y8SZ1d+6I+1zze6Z7kHXO7q3UyZAWw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/helpers.js" integrity="sha512-08S2icXl5dFWPl8stSVyzg3W14tTISlNtJekjsQplv326QtsmbEVqL4TFBrRXTdEj8QI5izJFoVaf5KgNDDOMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/helpers.min.js" integrity="sha512-JG3S/EICkp8Lx9YhtIpzAVJ55WGnxT3T6bfiXYbjPRUoN9yu+ZM+wVLDsI/L2BWRiKjw/67d+/APw/CDn+Lm0Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        var barJSONData1 = [];
        var barJSONData2 = [];
        @foreach (var issue in Model.AllTimeData.TopIssues)
        {
            @:barJSONData1.push("@issue.IssueName")
        }
        @foreach (var issue in Model.AllTimeData.TopIssues)
        {
            @:barJSONData2.push(@issue.IssueCount)
        }
        var barChart = document.getElementById("top-issues");
        var barChartData = {
            labels: barJSONData1,
            datasets: [{
                label: 'Issue Count',
                data: barJSONData2,
            },
            ]
        };
        const chart = new Chart(barChart, {
            type: 'bar',
            data: barChartData,
            options: {
                indexAxis: 'y',
                onClick: (e) => {
                    const canvasPosition = getRelativePosition(e, chart);

                    // Substitute the appropriate scale IDs
                    const dataX = chart.scales.x.getValueForPixel(canvasPosition.x);
                    const dataY = chart.scales.y.getValueForPixel(canvasPosition.y);
                }
            }
        });

        var lineJSONData1 = [];
        var lineJSONData2 = [];
        @foreach (var issue in Model.AllTimeData.TopIssues)
        {
            @:lineJSONData1.push("@issue.IssueName")
        }
        @foreach (var issue in Model.AllTimeData.TopIssues)
        {
            @:lineJSONData2.push(@issue.IssueCount)
        }
                var lineChart = document.getElementById("sentiment-over-time");
        var lineChartData = {
            labels: lineJSONData1,
            datasets: [{
                label: 'Issue Count',
                data: lineJSONData2,
            },
            ]
        };
        const secondChart = new Chart(lineChart, {
            type: 'line',
            data: lineChartData,

        });
    </script>
}